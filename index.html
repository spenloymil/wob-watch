<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>WOB WATCH+ — Stream</title>
<style>
  :root{
    --accent:#004d29;
    --accent-strong:#00623a;
    --bg-1:#04130f;
    --bg-2:#061a12;
    --card:#07261a;
    --muted:#9ec7b0;
    --glass: rgba(255,255,255,0.02);
    --radius:12px;
    --maxw:1300px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
    color:#e8f8ef;
    background: linear-gradient(180deg,var(--bg-1),var(--bg-2));
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }
  /* ---------- Header ---------- */
  .topbar{
    display:flex;align-items:center;gap:16px;padding:14px 22px;border-bottom:1px solid rgba(255,255,255,0.03);
    background: linear-gradient(90deg, rgba(0,77,41,0.06), transparent);
    position:sticky;top:0;z-index:40;
  }
  #logo {
    width:56px;height:56px;border-radius:10px;background:var(--accent);display:flex;align-items:center;justify-content:center;font-weight:900;font-size:20px;color:#fff;
  }
  #logo img{ width:100%;height:100%;object-fit:cover;display:block }
  .brand { display:flex; flex-direction:column; line-height:1; margin-left:6px;}
  .brand .title{ color:var(--accent); font-weight:900; letter-spacing:0.6px }
  .brand .sub{ color:var(--muted); font-size:13px; margin-top:2px }
  .header-actions{ margin-left:auto; display:flex; gap:10px; align-items:center }
  .btn { background:var(--accent); color:white; border:0; padding:8px 12px; border-radius:10px; cursor:pointer; font-weight:700; }
  .ghost { background:transparent; border:1px solid rgba(255,255,255,0.04); color:var(--muted); padding:7px 10px; border-radius:8px }

  /* ---------- Layout ---------- */
  main { max-width:var(--maxw); margin:22px auto; padding:0 18px 80px; }
  .layout { display:grid; grid-template-columns:260px 1fr; gap:24px; align-items:start; }
  @media (max-width:980px){ .layout { grid-template-columns: 1fr; } .leftCol{ order:2 } .rightCol{ order:1 } }

  /* ---------- Left column: series list ---------- */
  .leftCol { padding-top:6px; }
  .seriesList { display:flex; flex-direction:column; gap:10px; }
  .seriesItem{
    display:flex; gap:10px; align-items:center; padding:10px; border-radius:10px; cursor:pointer;
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
    border:1px solid rgba(255,255,255,0.02);
  }
  .seriesItem.active { box-shadow: 0 10px 30px rgba(0,0,0,0.6); outline:2px solid var(--accent); }
  .seriesThumb{ width:72px;height:48px;border-radius:8px;background:#092b20; display:flex;align-items:center;justify-content:center;color:var(--muted); font-weight:900; flex-shrink:0; overflow:hidden; }
  .seriesText{ display:flex; flex-direction:column; }
  .seriesName{ font-weight:800; font-size:14px; }
  .seriesDesc{ color:var(--muted); font-size:12px; margin-top:4px; }

  /* ---------- Right column ---------- */
  .hero {
    border-radius:14px; overflow:hidden; position:relative; margin-bottom:18px;
    background: linear-gradient(90deg, rgba(0,0,0,0.25), rgba(0,0,0,0.1)), url('') center/cover no-repeat;
    min-height:240px;
    display:flex; align-items:center; gap:20px; padding:20px;
    border:1px solid rgba(255,255,255,0.02);
  }
  .heroLeft{ width:320px; min-width:220px; }
  .heroCover{ width:100%; height:180px; border-radius:10px; background:#07261a; overflow:hidden; display:flex; align-items:center; justify-content:center; color:var(--muted); font-weight:900 }
  .heroBody{ flex:1; color:inherit; }
  .heroTitle{ font-weight:900; font-size:22px; color:#eaffef }
  .heroDesc{ color:var(--muted); margin-top:8px; max-width:700px; }
  .heroActions{ margin-top:12px; display:flex; gap:10px }

  /* season tabs (horizontal) */
  .seasonTabs{ display:flex; gap:8px; margin-bottom:14px; flex-wrap:wrap }
  .tab{ padding:8px 12px; border-radius:999px; background:transparent; color:var(--muted); border:1px solid rgba(255,255,255,0.03); cursor:pointer; }
  .tab.active{ background:var(--accent); color:white; border-color:transparent; box-shadow:0 8px 20px rgba(0,77,41,0.12); }

  /* episodes carousel row (horizontal scroll) */
  .rowTitle{ font-weight:900; font-size:16px; margin:8px 0 }
  .carousel { display:flex; gap:12px; overflow-x:auto; padding:8px 6px; scrollbar-width:thin; }
  .carousel::-webkit-scrollbar{ height:9px }
  .card { min-width:220px; max-width:220px; background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02)); border-radius:10px; overflow:hidden; border:1px solid rgba(255,255,255,0.02); }
  .thumb{ height:124px; background:#082b20; display:flex; align-items:center; justify-content:center; position:relative; }
  .thumb img{ width:100%; height:100%; object-fit:cover; display:block }
  .playBadge{ position:absolute; right:8px; bottom:8px; background:var(--accent); width:40px; height:40px; border-radius:999px; display:flex; align-items:center; justify-content:center; font-weight:800; color:white; box-shadow:0 8px 20px rgba(0,77,41,0.18) }
  .cardBody{ padding:10px; display:flex; flex-direction:column; gap:6px; }
  .epTitle{ font-weight:800; font-size:14px; color:#e9fff4; }
  .epDesc{ color:var(--muted); font-size:13px; min-height:36px; }

  /* vertical stacked episode list (for Netflix row mimic): thumbnail left, text right */
  .stackList{ display:flex; flex-direction:column; gap:12px; margin-top:14px; }
  .stackRow{ display:flex; gap:12px; align-items:flex-start; background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02)); border-radius:10px; padding:10px; border:1px solid rgba(255,255,255,0.02); }
  .stackThumb{ width:280px; height:158px; background:#07261a; border-radius:8px; flex-shrink:0; overflow:hidden; display:flex; align-items:center; justify-content:center; color:var(--muted); font-weight:900 }
  .stackMeta{ flex:1; display:flex; flex-direction:column; gap:8px; }
  .stackTitle{ font-weight:800; font-size:16px; color:#e9fff4 }
  .stackDesc{ color:var(--muted); font-size:13px }

  /* watched/fav badges */
  .fav{ font-size:18px; cursor:pointer; color:#ffd166; background:rgba(0,0,0,0.12); padding:6px; border-radius:6px; }
  .watched{ background:#0d6b3f;color:white;padding:4px 8px;border-radius:999px;font-size:12px; }

  /* player area (solid) */
  .playerArea{ margin-bottom:18px; border-radius:12px; background:#02130d; padding:14px; box-shadow:0 12px 40px rgba(0,0,0,0.6) }
  .playerFrame{ width:100%; border-radius:10px; overflow:hidden; background:black; min-height:280px; display:flex; align-items:center; justify-content:center; }
  .playerFrame iframe, .playerFrame video{ width:100%; height:100%; border:0; display:block }

  /* small screens */
  @media (max-width:980px){
    .thumb{ height:160px }
    .stackThumb{ width:100%; height:220px }
    .stackRow{ flex-direction:column; align-items:center }
  }
</style>
</head>
<body>

<!-- HEADER -->
<div class="topbar">
  <div id="logo" title="WOB WATCH+">
    <img id="logoImg" src="" alt="" style="display:none">
    <span id="logoLetter">W</span>
  </div>
  <div class="brand"><div class="title">WOB WATCH+</div><div class="sub">Stream the content on WOB WATCH Plus</div></div>
  <div class="header-actions">
    <input id="search" placeholder="Search series, episodes..." style="padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit" oninput="render()" />
    <button class="ghost" onclick="goHome()">Home</button>
  </div>
</div>

<main>
  <div class="layout">
    <!-- Left column -->
    <div class="leftCol">
      <div style="margin-bottom:12px"><strong style="font-weight:900">Series</strong></div>
      <div id="seriesList" class="seriesList"></div>
    </div>

    <!-- Right column -->
    <div class="rightCol">

      <!-- HERO -->
      <div id="hero" class="hero" style="background:linear-gradient(90deg, rgba(0,0,0,0.35), rgba(0,0,0,0.2));">
        <div class="heroLeft">
          <div id="heroCover" class="heroCover">COVER</div>
        </div>
        <div class="heroBody">
          <div id="heroTitle" class="heroTitle">Show title</div>
          <div id="heroDesc" class="heroDesc">Show description</div>
          <div class="heroActions">
            <button class="btn" id="heroPlay" onclick="heroPlay()">Play</button>
            <button class="ghost" onclick="toggleAutoplay()" id="heroAuto">Autoplay: Off</button>
            <div style="margin-left:12px"></div>
          </div>
        </div>
      </div>

      <!-- PLAYER -->
      <div id="playerArea" class="playerArea" style="display:none">
        <div class="playerFrame" id="playerFrame"><!-- iframe or video inserted here --></div>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">
          <div id="playerMeta" style="color:var(--muted)"></div>
          <div style="display:flex;gap:8px">
            <button class="ghost" onclick="playPrev()">Prev</button>
            <button class="ghost" onclick="playNext()">Next</button>
          </div>
        </div>
      </div>

      <!-- Season tabs -->
      <div id="seasonTabs" class="seasonTabs"></div>

      <!-- Episodes (Netflix-like stacked list) -->
      <div id="episodesContainer">
        <!-- we'll render rows here: either 'carousel' for thumbnails or 'stackList' for Netflix view -->
        <div id="episodesList" class="stackList"></div>
      </div>

    </div>
  </div>
</main>

<div style="text-align:center;color:var(--muted);padding:18px;font-size:13px">WOB WATCH+ — made with ❤️</div>

<script>
/* ==========================
   CONTENT ZONE — edit only here
   Keep videoUrl empty "" — they are placeholders for you to fill later.
   This file already contains Bloxburg's Drag Race with 2 seasons (6 eps in s1, 1 in s2).
*/
const CONTENT = [
  {
    id: 'bdr',
    name: "Bloxburg's Drag Race",
    desc: "Stream the original series on WOB WATCH+",
    cover: 'BDRS1COVER.png',
    seasons: [
      { id:'s1', title:'Season 1', episodes:[
          { id:'s1e1', title:'', desc:'', thumbnail:'', videoUrl:'' },
          { id:'s1e2', title:'', desc:'', thumbnail:'', videoUrl:'' },
          { id:'s1e3', title:'', desc:'', thumbnail:'', videoUrl:'' },
          { id:'s1e4', title:'', desc:'', thumbnail:'', videoUrl:'' },
          { id:'s1e5', title:'', desc:'', thumbnail:'', videoUrl:'' },
          { id:'s1e6', title:'', desc:'', thumbnail:'', videoUrl:'' }
      ]},
      { id:'s2', title:'Season 2', episodes:[
          { id:'s2e1', title:'', desc:'', thumbnail:'', videoUrl:'' }
      ]}
    ]
  }
];
/* ==========================
   End CONTENT ZONE
   ========================== */

/* ---------- persistent state ---------- */
const KEY_FAV = 'wob_favs_v1';
const KEY_W = 'wob_watched_v1';
const KEY_AUT = 'wob_autoplay_v1';

let FAVS = JSON.parse(localStorage.getItem(KEY_FAV) || '{}');
let WATCHED = JSON.parse(localStorage.getItem(KEY_W) || '{}');
let AUTOPLAY = JSON.parse(localStorage.getItem(KEY_AUT) || 'false');

function save(k,v){ try{ localStorage.setItem(k, JSON.stringify(v)); }catch(e){} }

/* ---------- helpers ---------- */
const qs = id => document.getElementById(id);
function escapeHtml(s){ return String(s||'').replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }
function loadLogo(){ const img=qs('logoImg'), letter=qs('logoLetter'); img.src='logo.png'; img.onload=()=>{ img.style.display='block'; letter.style.display='none'; }; img.onerror=()=>{ img.style.display='none'; letter.style.display='block'; }; }

/* ---------- youtube helper ---------- */
function toYouTubeEmbed(url){
  if(!url || typeof url !== 'string') return null;
  try{
    const m = url.match(/(?:youtube\.com\/(?:.*v=|embed\/)|youtu\.be\/)([A-Za-z0-9_-]{11})/);
    if(m && m[1]) return 'https://www.youtube.com/embed/' + m[1] + '?rel=0';
    try{ const u = new URL(url); const v = u.searchParams.get('v'); if(v) return 'https://www.youtube.com/embed/' + v + '?rel=0'; }catch(e){}
    return null;
  }catch(e){ return null; }
}

/* ---------- UI render ---------- */
let CURRENT = { seriesId:null, seasonId:null, episodeId:null };

function renderSeriesList(){
  const root = qs('seriesList'); root.innerHTML = '';
  CONTENT.forEach((s,i)=>{
    const el = document.createElement('div'); el.className='seriesItem' + (i===0 ? ' active' : '');
    el.onclick = ()=> { document.querySelectorAll('.seriesItem').forEach(x=>x.classList.remove('active')); el.classList.add('active'); openSeries(s.id); };
    const thumb = s.cover ? `<div class="seriesThumb"><img src="${escapeHtml(s.cover)}" style="width:100%;height:100%;object-fit:cover" /></div>` : `<div class="seriesThumb">${escapeHtml(s.name.slice(0,2).toUpperCase())}</div>`;
    el.innerHTML = thumb + `<div class="seriesText"><div class="seriesName">${escapeHtml(s.name)}</div><div class="seriesDesc">${escapeHtml(s.desc||'')}</div></div>`;
    root.appendChild(el);
  });
  qs('seriesCount').textContent = CONTENT.length + ' total';
}

/* open series */
function openSeries(seriesId){
  const s = CONTENT.find(x=>x.id===seriesId); if(!s) return;
  // hero
  const hero = qs('hero');
  qs('heroCover').innerHTML = s.cover ? `<img src="${escapeHtml(s.cover)}" style="width:100%;height:100%;object-fit:cover" />` : escapeHtml(s.name.slice(0,2).toUpperCase());
  qs('heroTitle').textContent = s.name;
  qs('heroDesc').textContent = s.desc || '';
  // season tabs
  const tabs = qs('seasonTabs'); tabs.innerHTML='';
  s.seasons.forEach((se, idx)=>{
    const b = document.createElement('button'); b.className='tab'; b.textContent = se.title;
    b.onclick = ()=> { document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active')); b.classList.add('active'); renderSeason(seriesId, se.id); };
    if(idx===0) b.classList.add('active');
    tabs.appendChild(b);
  });
  // render first season
  if(s.seasons[0]) renderSeason(seriesId, s.seasons[0].id);
  qs('playerArea').style.display='none';
  window.scrollTo({top:0, behavior:'smooth'});
}

/* render a season as Netflix-like stacked list */
function renderSeason(seriesId, seasonId){
  const s = CONTENT.find(x=>x.id===seriesId); if(!s) return;
  const season = (Array.isArray(s.seasons) ? s.seasons : []).find(x=>x.id===seasonId);
  const el = qs('episodesList'); el.innerHTML = '';
  if(!season) { el.innerHTML = '<div style="color:var(--muted)">No episodes</div>'; return; }
  season.episodes.forEach((ep, idx)=>{
    const titleDisplay = ep.title && ep.title.trim() ? ep.title : `Episode ${idx+1}`;
    const row = document.createElement('div'); row.className='stackRow';
    const thumbHtml = ep.thumbnail ? `<img src="${escapeHtml(ep.thumbnail)}" style="width:100%;height:100%;object-fit:cover" />` : `<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:var(--muted);font-weight:900">${escapeHtml(titleDisplay.slice(0,2).toUpperCase())}</div>`;
    row.innerHTML = `<div class="stackThumb">${thumbHtml}
        <div style="position:absolute;right:12px;bottom:12px" ><div class="playBadge">${ep.videoUrl ? '▶' : '⎯'}</div></div>
      </div>
      <div class="stackMeta">
        <div style="display:flex;gap:12px;align-items:center">
          <div class="stackTitle">${escapeHtml(titleDisplay)}</div>
          <div style="margin-left:auto">
            <button class="fav" onclick="toggleFav('${ep.id}', event)">${ FAVS[ep.id] ? '★' : '☆' }</button>
          </div>
        </div>
        <div class="stackDesc">${escapeHtml(ep.desc || '')}</div>
        <div style="margin-top:12px">
          ${ ep.videoUrl ? `<button class="btn" onclick="playEpisode('${seriesId}','${seasonId}','${ep.id}')">Play</button>` : `<button class="ghost" disabled>Coming soon</button>` }
          ${ WATCHED[ep.id] ? '<span style="margin-left:10px" class="watched">✓ watched</span>' : '' }
        </div>
      </div>`;
    el.appendChild(row);
  });
  // set current pointers
  CURRENT.seriesId = seriesId; CURRENT.seasonId = seasonId; CURRENT.episodeId = null;
}

/* play episode */
function playEpisode(seriesId, seasonId, episodeId){
  const s = CONTENT.find(x=>x.id===seriesId); if(!s) return;
  const se = (Array.isArray(s.seasons)?s.seasons:[]).find(x=>x.id===seasonId); if(!se) return;
  const ep = (Array.isArray(se.episodes)?se.episodes:[]).find(x=>x.id===episodeId); if(!ep) return;
  const url = ep.videoUrl || ep.videoData || '';
  if(!url){ alert('No video attached for this episode'); return; }
  CURRENT = { seriesId, seasonId, episodeId };
  showPlayer(url, ep.title || 'Episode', `${s.name} — ${se.title}`);
  // mark watched
  WATCHED[ep.id] = Date.now(); save(KEY_W, WATCHED);
}

/* show player (solid) */
function showPlayer(url, title, subtitle){
  const frame = qs('playerFrame'); frame.innerHTML = '';
  qs('playerMeta').textContent = subtitle || '';
  qs('playerTitle').textContent = title || '';
  // determine type
  const yt = toYouTubeEmbed(url);
  if(yt){
    // use iframe
    const wrap = document.createElement('div'); wrap.style.position='relative'; wrap.style.width='100%'; wrap.style.paddingTop='56.25%';
    const ifr = document.createElement('iframe');
    ifr.src = yt + '&autoplay=1';
    ifr.allow = 'accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture';
    ifr.style.position='absolute'; ifr.style.top='0'; ifr.style.left='0'; ifr.style.width='100%'; ifr.style.height='100%'; ifr.style.border='0';
    wrap.appendChild(ifr);
    frame.appendChild(wrap);
  } else {
    // assume mp4
    const video = document.createElement('video');
    video.controls = true; video.src = url; video.style.width='100%'; video.style.height='100%';
    video.addEventListener('ended', ()=>{ if(AUTOPLAY) playNext(); });
    frame.appendChild(video);
    video.play().catch(()=>{});
  }
  qs('playerArea').style.display='block';
  // update autoplay button label
  qs('heroAuto').textContent = 'Autoplay: ' + (AUTOPLAY ? 'On' : 'Off');
}

/* next / prev logic */
function findNext(seriesId, seasonId, episodeId){
  const s = CONTENT.find(x=>x.id===seriesId); if(!s) return null;
  const seasons = s.seasons || [];
  const si = seasons.findIndex(x=>x.id===seasonId);
  if(si === -1) return null;
  const se = seasons[si];
  const ei = se.episodes.findIndex(x=>x.id===episodeId);
  if(ei === -1) return null;
  if(ei + 1 < se.episodes.length) return { seriesId, seasonId, episodeId: se.episodes[ei+1].id };
  for(let j=si+1;j<seasons.length;j++){
    const ns = seasons[j];
    if(ns.episodes && ns.episodes.length) return { seriesId, seasonId: ns.id, episodeId: ns.episodes[0].id };
  }
  return null;
}
function playNext(){ if(!CURRENT.episodeId) return; const nxt = findNext(CURRENT.seriesId, CURRENT.seasonId, CURRENT.episodeId); if(nxt) playEpisode(nxt.seriesId, nxt.seasonId, nxt.episodeId); else alert('No next episode'); }
function playPrev(){ /* optional: implement if you add previous pointers */ alert('Previous not implemented'); }

/* favorites */
function toggleFav(epId, ev){
  if(ev) ev.stopPropagation();
  if(FAVS[epId]) delete FAVS[epId]; else FAVS[epId] = true;
  save(KEY_FAV, FAVS);
  // refresh season UI to update star
  if(CURRENT.seriesId && CURRENT.seasonId) renderSeason(CURRENT.seriesId, CURRENT.seasonId);
}

/* autoplay toggle */
function toggleAutoplay(){ AUTOPLAY = !AUTOPLAY; save(KEY_AUT, AUTOPLAY); qs('heroAuto').textContent = 'Autoplay: ' + (AUTOPLAY ? 'On' : 'Off'); }

/* hero play: plays first available episode in first season */
function heroPlay(){
  const s = CONTENT.find(x=>x.id===CURRENT.seriesId) || CONTENT[0];
  if(!s) return;
  const se = (s.seasons && s.seasons[0]) ? s.seasons[0] : null;
  if(!se || !se.episodes || !se.episodes.length) { alert('No episodes yet'); return; }
  const ep = se.episodes.find(e=>e.videoUrl) || se.episodes[0];
  if(!ep.videoUrl){ alert('No video attached to this show yet'); return; }
  playEpisode(s.id, se.id, ep.id);
}

/* nav home */
function goHome(){ qs('playerArea').style.display='none'; openSeries(CONTENT[0].id); }

/* init */
(function init(){
  loadLogo();
  renderSeriesList();
  if(CONTENT.length) openSeries(CONTENT[0].id);
  qs('heroAuto').textContent = 'Autoplay: ' + (AUTOPLAY ? 'On' : 'Off');
  window.playEpisode = playEpisode;
  window.playNext = playNext;
  window.toggleFav = toggleFav;
  window.toggleAutoplay = toggleAutoplay;
  window.openSeries = openSeries;
  // remove any stray UI artifacts
  document.title = 'WOB WATCH+ — Stream';
})();
</script>
</body>
</html>
